# ğŸŒ³ Banana Slides Gitå·¥ä½œæµ + CI/CDè§„èŒƒ

## ğŸ“‹ åˆ†æ”¯ç­–ç•¥

æˆ‘ä»¬é‡‡ç”¨ **GitHub Flow** ç®€åŒ–å·¥ä½œæµï¼Œé€‚åˆæŒç»­éƒ¨ç½²çš„Webåº”ç”¨ã€‚

### åˆ†æ”¯ç±»å‹

| åˆ†æ”¯ç±»å‹ | å‘½åè§„èŒƒ | ç”¨é€” | CI/CDç­–ç•¥ | ä¿æŠ¤è§„åˆ™ |
|---------|---------|------|-----------|---------|
| `main` | `main` | ç”Ÿäº§ç¯å¢ƒä»£ç  | âœ… å®Œæ•´æµ‹è¯• + è‡ªåŠ¨éƒ¨ç½² | ğŸ”’ å¼ºä¿æŠ¤ |
| `develop` | `develop` | å¼€å‘ç¯å¢ƒä»£ç  | âœ… å®Œæ•´æµ‹è¯• | ğŸ”’ ä¸­ç­‰ä¿æŠ¤ |
| `feature/*` | `feature/åŠŸèƒ½å` | æ–°åŠŸèƒ½å¼€å‘ | âœ… å¿«é€Ÿæ£€æŸ¥ | âš ï¸ æ— ä¿æŠ¤ |
| `fix/*` | `fix/bugæè¿°` | Bugä¿®å¤ | âœ… å¿«é€Ÿæ£€æŸ¥ | âš ï¸ æ— ä¿æŠ¤ |
| `hotfix/*` | `hotfix/ç´§æ€¥ä¿®å¤` | ç”Ÿäº§ç´§æ€¥ä¿®å¤ | âœ… å®Œæ•´æµ‹è¯• | âš ï¸ éœ€è¦å®¡æ ¸ |

---

## ğŸ”„ å®Œæ•´å¼€å‘æµç¨‹

### åœºæ™¯1ï¼šå¼€å‘æ–°åŠŸèƒ½

```bash
# 1. ä»developåˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout develop
git pull origin develop
git checkout -b feature/add-ai-image-edit

# 2. å¼€å‘å¹¶æäº¤
git add .
git commit -m "feat: æ·»åŠ AIå›¾ç‰‡ç¼–è¾‘åŠŸèƒ½"

# 3. æ¨é€åˆ°è¿œç¨‹ï¼ˆè§¦å‘PRå¿«é€Ÿæ£€æŸ¥ï¼‰
git push origin feature/add-ai-image-edit

# 4. åœ¨GitHubåˆ›å»ºPR: feature/xxx -> develop
#    - CIè‡ªåŠ¨è¿è¡Œï¼šå¿«é€Ÿæ£€æŸ¥ï¼ˆLint + æ„å»º + å†’çƒŸæµ‹è¯•ï¼‰
#    - æ—¶é—´ï¼š2-3åˆ†é’Ÿ
#    - é€šè¿‡åè¯·æ±‚ä»£ç å®¡æŸ¥

# 5. ä»£ç å®¡æŸ¥é€šè¿‡ï¼Œåˆå¹¶åˆ°develop
#    - CIè‡ªåŠ¨è¿è¡Œï¼šå®Œæ•´æµ‹è¯•å¥—ä»¶
#    - æ—¶é—´ï¼š10-15åˆ†é’Ÿ
#    - åŒ…å«ï¼šå•å…ƒæµ‹è¯• + é›†æˆæµ‹è¯• + Dockeræµ‹è¯• + E2Eæµ‹è¯•

# 6. æµ‹è¯•ç¯å¢ƒè‡ªåŠ¨éƒ¨ç½²ï¼ˆå¯é€‰ï¼‰
```

### åœºæ™¯2ï¼šå‘å¸ƒåˆ°ç”Ÿäº§

```bash
# 1. developç¨³å®šåï¼Œåˆ›å»ºPR: develop -> main
#    - CIè‡ªåŠ¨è¿è¡Œï¼šå®Œæ•´æµ‹è¯• + å®‰å…¨æ‰«æ

# 2. æµ‹è¯•é€šè¿‡ï¼Œä»£ç å®¡æŸ¥é€šè¿‡ï¼Œåˆå¹¶åˆ°main
#    - CIè‡ªåŠ¨è¿è¡Œï¼šå®Œæ•´æµ‹è¯•
#    - è‡ªåŠ¨æ„å»ºDockeré•œåƒ
#    - è‡ªåŠ¨éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒï¼ˆæˆ–ç­‰å¾…æ‰‹åŠ¨ç¡®è®¤ï¼‰

# 3. æ‰“Tagæ ‡è®°ç‰ˆæœ¬
git tag -a v0.1.0 -m "Release v0.1.0"
git push origin v0.1.0
```

### åœºæ™¯3ï¼šç´§æ€¥ä¿®å¤ç”Ÿäº§Bug

```bash
# 1. ä»mainåˆ›å»ºhotfixåˆ†æ”¯
git checkout main
git pull origin main
git checkout -b hotfix/fix-export-crash

# 2. ä¿®å¤å¹¶æµ‹è¯•
git add .
git commit -m "fix: ä¿®å¤å¯¼å‡ºPPTXå´©æºƒé—®é¢˜"

# 3. æ¨é€å¹¶åˆ›å»ºPR: hotfix/xxx -> main
git push origin hotfix/fix-export-crash

# 4. CIå®Œæ•´æµ‹è¯•é€šè¿‡ï¼Œç´§æ€¥åˆå¹¶
#    - éœ€è¦è‡³å°‘1äººå®¡æŸ¥
#    - åˆå¹¶åè‡ªåŠ¨éƒ¨ç½²

# 5. åŒæ­¥å›develop
git checkout develop
git merge main
git push origin develop
```

---

## ğŸš€ CI/CDè§¦å‘ç­–ç•¥

### PRå¿«é€Ÿæ£€æŸ¥ï¼ˆ2-3åˆ†é’Ÿï¼‰

**è§¦å‘æ¡ä»¶ï¼š** ä»»ä½•PRåˆ›å»ºæˆ–æ›´æ–°

```yaml
on:
  pull_request:
    branches: [ main, develop ]
```

**æ‰§è¡Œå†…å®¹ï¼š**
- âœ… Lintæ£€æŸ¥ï¼ˆä»£ç æ ¼å¼ï¼‰
- âœ… æ„å»ºæ£€æŸ¥ï¼ˆç¼–è¯‘æ˜¯å¦æˆåŠŸï¼‰
- âœ… å†’çƒŸæµ‹è¯•ï¼ˆåŸºæœ¬APIèƒ½å¦å¯åŠ¨ï¼‰

**ç›®çš„ï¼š** å¿«é€Ÿåé¦ˆï¼Œé¿å…æ˜æ˜¾é”™è¯¯

---

### å®Œæ•´æµ‹è¯•ï¼ˆ10-15åˆ†é’Ÿï¼‰

**è§¦å‘æ¡ä»¶ï¼š** 
- Pushåˆ° `main` åˆ†æ”¯
- Pushåˆ° `develop` åˆ†æ”¯
- PRåˆå¹¶åˆ° `main` æˆ– `develop`

```yaml
on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main, develop ]
```

**æ‰§è¡Œå†…å®¹ï¼š**
- âœ… åç«¯å•å…ƒæµ‹è¯•ï¼ˆè¦†ç›–ç‡ â‰¥80%ï¼‰
- âœ… åç«¯é›†æˆæµ‹è¯•ï¼ˆæ‰€æœ‰APIç«¯ç‚¹ï¼‰
- âœ… å‰ç«¯å•å…ƒæµ‹è¯•ï¼ˆç»„ä»¶æµ‹è¯•ï¼‰
- âœ… Dockerç¯å¢ƒæµ‹è¯•ï¼ˆå®¹å™¨åŒ–éƒ¨ç½²ï¼‰
- âœ… E2Eæµ‹è¯•ï¼ˆæ ¸å¿ƒç”¨æˆ·æµç¨‹ï¼‰
- âœ… å®‰å…¨æ‰«æï¼ˆä¾èµ–æ¼æ´ï¼‰

**ç›®çš„ï¼š** ä¿è¯ä»£ç è´¨é‡ï¼Œé˜²æ­¢ç ´åæ€§æ›´æ”¹

---

### è‡ªåŠ¨éƒ¨ç½²

**è§¦å‘æ¡ä»¶ï¼š**
- `main` åˆ†æ”¯æµ‹è¯•é€šè¿‡ â†’ ç”Ÿäº§ç¯å¢ƒ
- `develop` åˆ†æ”¯æµ‹è¯•é€šè¿‡ â†’ æµ‹è¯•ç¯å¢ƒï¼ˆå¯é€‰ï¼‰

---

## ğŸ”’ åˆ†æ”¯ä¿æŠ¤è§„åˆ™

### mainåˆ†æ”¯ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

åœ¨GitHub Settings â†’ Branches â†’ Branch protection rules è®¾ç½®ï¼š

```yaml
åˆ†æ”¯: main

ä¿æŠ¤è§„åˆ™:
â˜‘ Require a pull request before merging
  â˜‘ Require approvals: 1
  â˜‘ Dismiss stale pull request approvals when new commits are pushed
  â˜‘ Require review from Code Owners

â˜‘ Require status checks to pass before merging
  â˜‘ Require branches to be up to date before merging
  å¿…éœ€çš„æ£€æŸ¥:
    - åç«¯å•å…ƒæµ‹è¯•
    - åç«¯é›†æˆæµ‹è¯•
    - å‰ç«¯æµ‹è¯•
    - Dockerç¯å¢ƒæµ‹è¯•
    - E2Eæµ‹è¯•

â˜‘ Require conversation resolution before merging

â˜‘ Require signed commits (æ¨è)

â˜‘ Include administrators (ç®¡ç†å‘˜ä¹Ÿå¿…é¡»éµå®ˆè§„åˆ™)

â˜‘ Restrict who can push to matching branches
  å…è®¸: ä»…ç»´æŠ¤è€…

â˜‘ Allow force pushes: âŒ ç¦æ­¢
â˜‘ Allow deletions: âŒ ç¦æ­¢
```

### developåˆ†æ”¯ï¼ˆå¼€å‘ç¯å¢ƒï¼‰

```yaml
åˆ†æ”¯: develop

ä¿æŠ¤è§„åˆ™:
â˜‘ Require a pull request before merging
  â˜‘ Require approvals: 1 (å¯é€‰ï¼Œå°å›¢é˜Ÿå¯ä»¥ä¸è¦æ±‚)

â˜‘ Require status checks to pass before merging
  å¿…éœ€çš„æ£€æŸ¥:
    - å¿«é€Ÿæ£€æŸ¥
    - åç«¯å•å…ƒæµ‹è¯•
    - å‰ç«¯æµ‹è¯•

â˜‘ Allow force pushes: âŒ ç¦æ­¢
â˜‘ Allow deletions: âŒ ç¦æ­¢
```

---

## ğŸ“ Commitè§„èŒƒ

ä½¿ç”¨ **Conventional Commits** è§„èŒƒï¼š

```bash
<type>(<scope>): <subject>

<body>

<footer>
```

### Typeç±»å‹

| Type | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `feat` | æ–°åŠŸèƒ½ | `feat: æ·»åŠ AIå›¾ç‰‡ç¼–è¾‘åŠŸèƒ½` |
| `fix` | Bugä¿®å¤ | `fix: ä¿®å¤PPTXå¯¼å‡ºå´©æºƒ` |
| `docs` | æ–‡æ¡£æ›´æ–° | `docs: æ›´æ–°APIæ–‡æ¡£` |
| `style` | ä»£ç æ ¼å¼ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰ | `style: æ ¼å¼åŒ–ä»£ç ` |
| `refactor` | é‡æ„ï¼ˆä¸æ˜¯æ–°åŠŸèƒ½ä¹Ÿä¸æ˜¯ä¿®å¤ï¼‰ | `refactor: é‡æ„AIæœåŠ¡` |
| `perf` | æ€§èƒ½ä¼˜åŒ– | `perf: ä¼˜åŒ–å›¾ç‰‡ç”Ÿæˆé€Ÿåº¦` |
| `test` | æµ‹è¯•ç›¸å…³ | `test: æ·»åŠ å•å…ƒæµ‹è¯•` |
| `chore` | æ„å»º/å·¥å…·é“¾ | `chore: æ›´æ–°ä¾èµ–` |
| `ci` | CI/CDç›¸å…³ | `ci: æ·»åŠ E2Eæµ‹è¯•` |

### ç¤ºä¾‹

```bash
# å¥½çš„commit
feat(backend): æ·»åŠ ç´ æç®¡ç†API
fix(frontend): ä¿®å¤æ¨¡æ¿ä¸Šä¼ 415é”™è¯¯
docs(readme): æ›´æ–°Dockeréƒ¨ç½²è¯´æ˜
test(e2e): æ·»åŠ å®Œæ•´PPTç”Ÿæˆæµç¨‹æµ‹è¯•

# ä¸å¥½çš„commit
update files
fix bug
ä¿®æ”¹
```

---

## ğŸ¯ PRæ¨¡æ¿

åˆ›å»º `.github/pull_request_template.md`ï¼š

```markdown
## ğŸ“ å˜æ›´è¯´æ˜

<!-- ç®€è¦æè¿°æœ¬PRçš„ç›®çš„ -->

## ğŸ”— ç›¸å…³Issue

Closes #(issueç¼–å·)

## âœ… å˜æ›´ç±»å‹

- [ ] æ–°åŠŸèƒ½ (feature)
- [ ] Bugä¿®å¤ (fix)
- [ ] æ–‡æ¡£æ›´æ–° (docs)
- [ ] ä»£ç é‡æ„ (refactor)
- [ ] æ€§èƒ½ä¼˜åŒ– (perf)
- [ ] æµ‹è¯•ç›¸å…³ (test)

## ğŸ§ª æµ‹è¯•

- [ ] å·²æ·»åŠ å•å…ƒæµ‹è¯•
- [ ] å·²æ·»åŠ é›†æˆæµ‹è¯•
- [ ] å·²æ‰‹åŠ¨æµ‹è¯•
- [ ] CIæµ‹è¯•é€šè¿‡

## ğŸ“¸ æˆªå›¾ï¼ˆå¦‚æœé€‚ç”¨ï¼‰

<!-- æ·»åŠ æˆªå›¾æˆ–GIF -->

## âœ‹ æ£€æŸ¥æ¸…å•

- [ ] ä»£ç éµå¾ªé¡¹ç›®è§„èŒƒ
- [ ] å·²æ›´æ–°ç›¸å…³æ–‡æ¡£
- [ ] é€šè¿‡Lintæ£€æŸ¥
- [ ] æ— æ–°çš„è­¦å‘Šæˆ–é”™è¯¯
- [ ] å·²è‡ªæˆ‘å®¡æŸ¥ä»£ç 
```

---

## ğŸš¦ å®é™…å·¥ä½œæµç¤ºä¾‹

### å›¢é˜Ÿæ—¥å¸¸å¼€å‘

```mermaid
graph LR
    A[æœ¬åœ°å¼€å‘] --> B[åˆ›å»ºfeatureåˆ†æ”¯]
    B --> C[æäº¤ä»£ç ]
    C --> D[æ¨é€åˆ°è¿œç¨‹]
    D --> E[åˆ›å»ºPRåˆ°develop]
    E --> F{å¿«é€Ÿæ£€æŸ¥}
    F -->|å¤±è´¥| C
    F -->|é€šè¿‡| G[ä»£ç å®¡æŸ¥]
    G -->|éœ€ä¿®æ”¹| C
    G -->|é€šè¿‡| H[åˆå¹¶åˆ°develop]
    H --> I{å®Œæ•´æµ‹è¯•}
    I -->|å¤±è´¥| J[å›æ»š/ä¿®å¤]
    I -->|é€šè¿‡| K[éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒ]
```

### å‘å¸ƒæµç¨‹

```mermaid
graph LR
    A[developç¨³å®š] --> B[åˆ›å»ºPR: developâ†’main]
    B --> C{å®Œæ•´æµ‹è¯•}
    C -->|å¤±è´¥| D[ä¿®å¤develop]
    C -->|é€šè¿‡| E[ä»£ç å®¡æŸ¥]
    E --> F[åˆå¹¶åˆ°main]
    F --> G[æ‰“Tag]
    G --> H[è‡ªåŠ¨éƒ¨ç½²åˆ°ç”Ÿäº§]
    H --> I[ç›‘æ§]
```

---

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. å°è€Œé¢‘ç¹çš„æäº¤
```bash
# å¥½ï¼šåŠŸèƒ½æ‹†åˆ†ï¼Œæ¯ä¸ªcommitåšä¸€ä»¶äº‹
git commit -m "feat: æ·»åŠ ç´ æä¸Šä¼ API"
git commit -m "feat: æ·»åŠ ç´ æåˆ—è¡¨æŸ¥è¯¢"
git commit -m "test: æ·»åŠ ç´ æAPIæµ‹è¯•"

# ä¸å¥½ï¼šå¤§è€Œå…¨çš„æäº¤
git commit -m "æ·»åŠ ç´ æåŠŸèƒ½"  # åŒ…å«äº†10ä¸ªæ–‡ä»¶çš„ä¿®æ”¹
```

### 2. åŠæ—¶åŒæ­¥ä¸»åˆ†æ”¯
```bash
# æ¯å¤©å¼€å§‹å·¥ä½œå‰
git checkout develop
git pull origin develop

# åŠŸèƒ½åˆ†æ”¯å®šæœŸåŒæ­¥
git checkout feature/my-feature
git merge develop  # æˆ–è€… git rebase develop
```

### 3. PRä¿æŒå°å·§
- å•ä¸ªPRæ”¹åŠ¨ < 400è¡Œä»£ç 
- å•ä¸ªPRè§£å†³å•ä¸ªé—®é¢˜
- ä¾¿äºä»£ç å®¡æŸ¥

### 4. å……åˆ†åˆ©ç”¨CIåé¦ˆ
```bash
# Pushå‰æœ¬åœ°æ£€æŸ¥
npm run lint
npm test
pytest

# æ¨é€åç«‹å³æŸ¥çœ‹CIçŠ¶æ€
# å¤±è´¥ç«‹å³ä¿®å¤ï¼Œä¸è¦å †ç§¯
```

### 5. ä»£ç å®¡æŸ¥è¦ç‚¹
- [ ] åŠŸèƒ½æ˜¯å¦ç¬¦åˆéœ€æ±‚
- [ ] ä»£ç æ˜¯å¦æ¸…æ™°æ˜“æ‡‚
- [ ] æ˜¯å¦æœ‰æ½œåœ¨bug
- [ ] æ˜¯å¦æœ‰æµ‹è¯•è¦†ç›–
- [ ] æ˜¯å¦å½±å“æ€§èƒ½
- [ ] æ˜¯å¦æœ‰å®‰å…¨éšæ‚£

---

## ğŸ“š å‚è€ƒèµ„æ–™

- [GitHub Flow](https://docs.github.com/en/get-started/quickstart/github-flow)
- [Conventional Commits](https://www.conventionalcommits.org/)
- [Branch Protection Rules](https://docs.github.com/en/repositories/configuring-branches-and-merges-in-your-repository/managing-protected-branches/about-protected-branches)

---

## ğŸ†˜ å¸¸è§é—®é¢˜

### Q: featureåˆ†æ”¯è¦è·‘å®Œæ•´æµ‹è¯•å—ï¼Ÿ
A: ä¸éœ€è¦ã€‚featureåˆ†æ”¯åªè·‘å¿«é€Ÿæ£€æŸ¥ï¼ˆ2-3åˆ†é’Ÿï¼‰ï¼Œåˆå¹¶åˆ°developåæ‰è·‘å®Œæ•´æµ‹è¯•ã€‚

### Q: å¯ä»¥ç›´æ¥pushåˆ°developå—ï¼Ÿ
A: ä¸å¯ä»¥ã€‚å¿…é¡»é€šè¿‡PRï¼Œç¡®ä¿ä»£ç å®¡æŸ¥å’ŒCIæ£€æŸ¥ã€‚

### Q: CIå¤±è´¥äº†æ€ä¹ˆåŠï¼Ÿ
A: 
1. æŸ¥çœ‹å¤±è´¥åŸå› 
2. æœ¬åœ°ä¿®å¤å¹¶æµ‹è¯•
3. æäº¤ä¿®å¤å¹¶æ¨é€
4. CIä¼šè‡ªåŠ¨é‡æ–°è¿è¡Œ

### Q: ç´§æ€¥ä¿®å¤å¯ä»¥è·³è¿‡CIå—ï¼Ÿ
A: ä¸å¯ä»¥ã€‚ä½†å¯ä»¥ï¼š
1. å¹¶è¡Œè¿›è¡Œä¿®å¤å’Œæµ‹è¯•
2. ä½¿ç”¨hotfixæµç¨‹å¿«é€Ÿåˆå¹¶
3. å…³é”®äººå‘˜å¿«é€Ÿå®¡æŸ¥

### Q: developå’Œmainåº”è¯¥å¤šä¹…åŒæ­¥ä¸€æ¬¡ï¼Ÿ
A: 
- å°åŠŸèƒ½ï¼š1-2å‘¨
- å¤§ç‰ˆæœ¬ï¼šæŒ‰milestone
- ç´§æ€¥ä¿®å¤ï¼šç«‹å³

---

**æœ€åæ›´æ–°ï¼š** 2025-12-07

